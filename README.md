# Octoxlabs Senior Backend Engineer Case Study

This project is a solution developed for the Octoxlabs Senior Backend Engineer case study.

## Project Structure

The project is a Docker composition consisting of the following services:

1. **Django REST Framework API**: Main endpoint
2. **Query Converter Service**: FastAPI-based service that converts queries to Elasticsearch format
3. **Logger Service**: Custom-developed service for query logging
4. **RabbitMQ**: Message queue service
5. **Elasticsearch**: Data storage and search service

## Installation and Setup

### Prerequisites

- Docker and Docker Compose

### Running the Project

```bash
# Clone the project
git clone https://github.com/yourusername/octoxlabs-case.git
cd octoxlabs-case

# Start services using Docker Compose
docker-compose up -d

# Wait for services to start
sleep 30

# Create test user
docker-compose exec api python manage.py createsuperuser --username octoAdmin --email admin@octoxlabs.com --noinput
```

## API Usage

### Authentication

The API uses the Octoxlabs authentication mechanism. A token is generated by base64 encoding the username.

```bash
# Token generation example
echo -n "octoAdmin<username>" | base64
# Output: b2N0b0FkbWluPHVzZXJuYW1lPg==

# API request example
curl -X POST \
  http://localhost:8000/search \
  -H 'Authorization: Octoxlabs b2N0b0FkbWluPHVzZXJuYW1lPg==' \
  -H 'Content-Type: application/json' \
  -d '{"query": "Hostname = octoxlabs*"}'
```

### CLI Tool

A CLI tool is available as a Django management command:

```bash
# Using the CLI tool
docker-compose exec api python manage.py search_cli "Hostname = octoxlabs*" --username octoAdmin
```

## Security Features

1. **Authentication**: Custom Octoxlabs authentication mechanism
2. **Input Validation**: All API inputs are validated
3. **Error Handling**: Secure error handling and logging
4. **Inter-Service Security**: Isolated services within Docker network

## Testing

To run unit tests:

```bash
docker-compose exec api python manage.py test
```

## Code Quality

Code quality tools (flake8, black) are integrated:

```bash
# Check code style
docker-compose exec api flake8

# Format code
docker-compose exec api black .
```

## Service Ports

- API Service: 8000
- Query Converter Service: 8001
- Logger Service: 8002
- RabbitMQ: 5672 (AMQP), 15672 (Management UI)
- Elasticsearch: 9200

## Development

The project uses a microservices architecture with the following key components:

- **API Service**: Handles HTTP requests and authentication
- **Query Converter**: Transforms user queries into Elasticsearch format
- **Logger Service**: Records search queries and results
- **Message Queue**: Manages asynchronous communication between services
- **Search Engine**: Provides efficient data storage and retrieval

## Contributing

1. Fork the repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Create a new Pull Request